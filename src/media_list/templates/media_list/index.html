{% extends 'media_list/base.html' %}
{% load static thumbnail %}

{% block title %}Browse{% endblock title %}

{% block content %}

  <h1>Media List</h1>

  <div class="row">
    <div class="col-2">
      <div id="filters">
        <div class="input-group mb-3">
          <input class="form-control" id="list-filter-by-title" placeholder="Search title" type="text">

          <div class="input-group-append">
            <span class="input-group-text">
              <i class="fas fa-filter"></i>
            </span>
          </div>
        </div>

        <div class="input-group mb-3">
          <select class="custom-select" id="list-filter-by-source">
            <option selected value="">Filter by source...</option>
            {% for source in sources %}
              <option value="{{ source }}">{{ source }}</option>
            {% endfor %}
          </select>
        </div>

        <p>Completed:</p>

        <div class="btn-group btn-group-toggle" data-toggle="buttons" id="list-filter-by-completed">
          <label class="btn btn-primary active">
            <input checked name="filter-by-completed" type="radio" value=""> Any
          </label>

          <label class="btn btn-primary">
            <input name="filter-by-completed" type="radio" value="True"> Yes
          </label>

          <label class="btn btn-primary">
            <input name="filter-by-completed" type="radio" value="False"> No
          </label>
        </div>

        <p>Has info:</p>

        <div class="btn-group btn-group-toggle" data-toggle="buttons" id="list-filter-by-baka-info">
          <label class="btn btn-primary active">
            <input checked name="filter-by-baka-info" type="radio" value=""> Any
          </label>

          <label class="btn btn-primary">
            <input name="filter-by-baka-info" type="radio" value="True"> Yes
          </label>

          <label class="btn btn-primary">
            <input name="filter-by-baka-info" type="radio" value="False"> No
          </label>
        </div>

{#        <button type="button" class="btn btn-primary" disabled>#}
{#          Default order#}
{#        </button>#}
{##}
{#        <button type="button" class="btn btn-primary" disabled>#}
{#          Order by Interest#}
{#        </button>#}
      </div>
    </div>

    <div class="col-8">
      <div id="media-list">
        <table class="table table-hover table-bordered table-responsive">
          <thead>
          <tr>
            <th class="ml-column"></th>
            <th class="ml-column ml-column-title">Source</th>
            <th class="ml-column ml-column-title">Title</th>
            <th class="ml-column ml-column-volumes">Volumes</th>
            <th class="ml-column ml-column-completed">Completed</th>
            <th class="ml-column ml-column-interest">Interest</th>
            <th class="ml-column ml-column-status">Status</th>
            <th class="ml-column">Actions</th>
          </tr>
          </thead>

          <tbody>
          {% for series in series_list %}
            <tr class="ml-row" data-series-id="{{ series.id }}" data-detail-url="{% url 'detail' series.id %}"
                data-source="{{ series.source }}" data-completed="{{ series.is_completed }}"
            data-baka-info="{{ series.baka_info_id|yesno:"True,False" }}">
              <td class="ml-cell-thumbnail">
                {% if series.baka_info.image %}
                  <img src="{{ series.baka_info.image|thumbnail_url:'list' }}" alt="{{ series.title }}"/>
                {% endif %}
              </td>

              <td>
                {% if series.source %}
                  <img class="source-icon" src="{{ series.source.icon.url }}" alt="{{ series.source }}"
                       title="{{ series.source }}">
                {% endif %}
              </td>

              <td class="ml-cell-title">
                <b>{{ series.title }}</b>
                {% if series.alternate_title %}
                  [{{ series.alternate_title }}]
                {% endif %}
              </td>

              <td>{{ series.display_volumes }}</td>

              <td class="text-center"><i class="fas fa-{{ series.is_completed|yesno:"check,times" }}"></i></td>

              <td>{{ series.interest }}</td>

              <td>{{ series.get_status_display }}</td>

              <td>
                <div class="d-flex justify-content-around">
                  <a href="{% url "edit" series.id %}">
                    <i class="fas fa-edit"></i>
                  </a>

                  <a href="{% url "delete" series.id %}">
                    <i class="fas fa-trash"></i>
                  </a>
                </div>
              </td>
            </tr>
          {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <div class="modal fade" id="details-modal" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-xl">
      <div class="modal-content"></div>
    </div>
  </div>

{% endblock content %}

{% block extra_js %}
  <script src="{% static 'media_list/js/list.js' %}"></script>
{% endblock %}
